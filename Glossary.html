<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Glossary</title>
  <style>
  :root {
    --solarized-base03:  #002b36;
    --solarized-base02:  #073642;
    --solarized-base01:  #586e75;
    --solarized-base00:  #657b83;
    --solarized-base0:   #839496;
    --solarized-base1:   #93a1a1;
    --solarized-base2:   #eee8d5;
    --solarized-base3:   #fdf6e3;
    --solarized-yellow:  #b58900;
    --solarized-orange:  #cb4b16;
    --solarized-red:     #dc322f;
    --solarized-magenta: #d33682;
    --solarized-violet:  #6c71c4;
    --solarized-blue:    #268bd2;
    --solarized-cyan:    #2aa198;
    --solarized-green:   #859900;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --solarized-base03: #fdf6e3;
      --solarized-base02: #eee8d5;
      --solarized-base01: #93a1a1;
      --solarized-base00: #839496;
      --solarized-base0:  #657b83;
      --solarized-base1:  #586e75;
      --solarized-base2:  #073642;
      --solarized-base3:  #002b36;
    }
  }

  pre, pre.numberSource {
    background: var(--solarized-base3);
    /* border: 1px solid var(--solarized-base2); */
    --color-code-highlight-bg: var(--solarized-base2);
  }
  pre code { color: var(--solarized-base00); }
  pre.numberSource > code.sourceCode > span > a:first-child::before {
    color: var(--solarized-base1);
  }
  code span.kw { color: var(--solarized-green);  font-weight: normal; font-style: normal; } /* Keyword */
  code span.dt { color: var(--solarized-yellow); font-weight: normal; font-style: normal; } /* DataType */
  code span.dv { color: var(--solarized-cyan);   font-weight: normal; font-style: normal; } /* DecVal */
  code span.bn { color: var(--solarized-cyan);   font-weight: normal; font-style: normal; } /* BaseN */
  code span.fl { color: var(--solarized-cyan);   font-weight: normal; font-style: normal; } /* Float */
  code span.ch { color: var(--solarized-cyan);   font-weight: normal; font-style: normal; } /* Char */
  code span.st { color: var(--solarized-cyan);   font-weight: normal; font-style: normal; } /* String */
  code span.co { color: var(--solarized-base1);  font-weight: normal; font-style: italic; } /* Comment */
  code span.ot { color: var(--solarized-blue);   font-weight: normal; font-style: normal; } /* Other */
  code span.al { color: var(--solarized-red);    font-weight: normal; font-style: normal; } /* Alert */
  code span.fu { color: var(--solarized-blue);   font-weight: normal; font-style: normal; } /* Function */
  code span.er { color: var(--solarized-red);    font-weight: normal; font-style: normal; } /* Error */
  code span.wa { color: var(--solarized-orange); font-weight: normal; font-style: italic; } /* Warning */
  code span.cn { color: var(--solarized-cyan);   font-weight: normal; font-style: normal; } /* Constant */
  code span.sc { color: var(--solarized-red);    font-weight: normal; font-style: normal; } /* SpecialChar */
  code span.vs { color: var(--solarized-cyan);   font-weight: normal; font-style: normal; } /* VerbatimString */
  code span.ss { color: var(--solarized-red);    font-weight: normal; font-style: normal; } /* SpecialString */
  code span.im { color: var(--solarized-base00); font-weight: normal; font-style: normal; } /* Import */
  code span.va { color: var(--solarized-blue);   font-weight: normal; font-style: normal; } /* Variable */
  code span.cf { color: var(--solarized-green);  font-weight: normal; font-style: normal; } /* ControlFlow */
  code span.op { color: var(--solarized-green);  font-weight: normal; font-style: normal; } /* Operator */
  code span.bu { color: var(--solarized-base00); font-weight: normal; font-style: normal; } /* BuiltIn */
  code span.ex { color: var(--solarized-base00); font-weight: normal; font-style: normal; } /* Extension */
  code span.pp { color: var(--solarized-orange); font-weight: normal; font-style: normal; } /* Preprocessor */
  code span.at { color: var(--solarized-base00); font-weight: normal; font-style: normal; } /* Attribute */
  code span.do { color: var(--solarized-base1);  font-weight: normal; font-style: italic; } /* Documentation */
  code span.an { color: var(--solarized-base1);  font-weight: normal; font-style: italic; } /* Annotation */
  code span.cv { color: var(--solarized-base1);  font-weight: normal; font-style: italic; } /* CommentVar */
  code span.in { color: var(--solarized-base1);  font-weight: normal; font-style: italic; } /* Information */
  a.sourceLine::before { text-decoration: none; }

  /* pandoc diff mode */
  code.diff span.kw { color: var(--solarized-yellow); font-weight: normal; font-style: normal; } /* --- lines */
  code.diff span.dt { color: var(--solarized-blue);   font-weight: normal; font-style: normal; } /* +++ lines, @@ ... @@ lines */
  code.diff span.st { color: var(--solarized-red);    font-weight: normal; font-style: normal; } /* - lines */
  code.diff span.va { color: var(--solarized-green);  font-weight: normal; font-style: normal; } /* + lines */

  </style>
  <style>

  /* ----- Global settings ----------------------------------------------- {{{ */

  :root {
    /* --- Colors --- */
    --background-color: #161313;

    --color-text: #f7f5f2;
    --color-text-secondary: #9d9b99;
    --color-link: #bc805d;
    --color-sidenote: #b4b2af;

    --highlight-red: #660000;
    --highlight-yellow: #7f6000;
    --highlight-green: #274e13;
    --highlight-blue: #1c4587;
    --highlight-purple: #351c75;

    --color-inline-code: #f7f5f2;
    --color-inline-code-bg: #242121;

    --color-border: #393635;
    --color-border-heavy: #524f4d;

    --color-table-heading: #242121;

    /* --- Text --- */

    --font-family-prose: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
    --font-family-heading: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
    --font-family-code: Menlo, monospace;
    --side-note-number-font-family: var(--font-family-prose);

    --line-height: 26px;
    --font-size: 17px;

    --inline-code-font-size: 15px;
    --code-block-font-size: 14px;
    --code-block-side-padding: 8px;
    --line-numbers-font-size: 12px;

    --tight-code-line-height: 18px;
    --tight-code-padding-top: 5px;

    --side-note-line-height: 20px;
    --side-note-font-size: 13px;
    --side-note-code-font-size: 13px;
    --side-note-baseline-offset: 4px;
    --side-note-sup-offset: -6px;
    --side-note-number-hang-left: -6px;
    --side-note-text-indent: -9px;

    --heading-font-weight: 500;

    --title-font-size: 42px;
    --title-code-font-size: 40px;
    --title-line-height: 48px;
    --title-margin-top: 92px;

    --h1-font-size: 32px;
    --h1-code-font-size: 29px;
    --h1-line-height: 36px;
    --h1-word-spacing: 1px;
    --h1-margin-top: 30px;
    --h1-margin-bottom: 12px;

    --h2-font-size: 22px;
    --h2-code-font-size: 20px;
    --h2-line-height: 28px;
    --h2-word-spacing: 0.5px;
    --h2-margin-top: 18px;
    --h2-margin-bottom: 6px;

    --ul-indent-size: 23px;
    --ol-indent-size: 19px;
    --ol-li-padding-left: 4px;

    --hr-margin-top: 18px;
    --hr-margin-bottom: calc(var(--line-height) - var(--hr-margin-top) - 1px);

    --extra-wide-scale-factor: 1.5;

    --figcaption-line-height: 21px;
    --figcaption-font-size: 14px;
    --figcaption-code-font-size: 13px;
    --figcaption-gap: 6px;
    --captioned-figure-gap: 10px;

    --table-line-height: 21px;
    --table-font-size: 14px;
    --table-code-font-size: 13px;

    --nav-toc-font-size: 12px;
    --nav-toc-code-font-size: 12px;
    --nav-toc-indent: 15px;
    --nav-toc-baseline-offset: 2px;

    /* --- Layout --- */

    --main-width: 745px * 2;
    /* The name doesn't indicate it, but this variable actually specifies an
     * effective minimum width. (It didn't previously behave this way, but the
     * change to do so was made in a backwards-compatible way, so the variable
     * was not renamed.)
     **/
    --main-width-narrow: 550px;
    --side-note-max-width: 300px;

  }


  *, *:after, *:before {
    box-sizing: border-box;
    margin: 0;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html {
    /* https://github.com/edwardtufte/tufte-css/issues/81#issuecomment-261953409 */
    -webkit-text-size-adjust: 100%;
  }

  body {
    font-family: var(--font-family-prose);
    color: var(--color-text);
    font-size: var(--font-size);
    line-height: var(--line-height);
    -webkit-font-variant-ligatures: no-common-ligatures;
    font-variant-ligatures: no-common-ligatures;

    /* Safari-only right now (macOS, iOS) but looks so good. */
    hanging-punctuation: first;

    margin: 0;
    padding: 0;
    padding-top: var(--title-margin-top);
    width: 100%;

    background-color: var(--background-color);
  }

  @media print {
    body {
      background-color: initial;
    }
  }

  /* }}} */
  /* ----- Utility classes -----------------------------------------------  {{{ */
  .only-light-mode {
    display: inherit;
  }
  .only-dark-mode {
    display: none;
  }

  @media (prefers-color-scheme: dark) {
    .only-light-mode {
      display: none;
    }
    .only-dark-mode {
      display: inherit;
    }
  }
  /* }}} */
  /* ----- Side notes and margin notes ----------------------------------- {{{ */
  /* --- Side note text and numbering --- {{{ */

  .sidenote,
  .marginnote {
    color: var(--color-sidenote);

    font-size: var(--side-note-font-size);
    line-height: var(--side-note-line-height);
    vertical-align: baseline;

    /* Align first baseline to body. */
    margin-top: var(--side-note-baseline-offset);
  }

  .sidenote code,
  .marginnote code {
    color: var(--color-sidenote);
  }

  main {
    counter-reset: sidenote-counter;
  }

  .sidenote-number {
    counter-increment: sidenote-counter;
  }

  .sidenote-number:after,
  .sidenote:before {
    content: counter(sidenote-counter);
    position: relative;
  }

  nav#TOC label,
  label.margin-toggle:not(.sidenote-number),
  .sidenote-number:after,
  .sidenote:before,
  .footnote-ref sup,
  sup {
    font-size: var(--side-note-font-size);
    font-weight: 700;
    font-family: var(--side-note-number-font-family);
    -webkit-font-feature-settings: "tnum" 1;
    font-feature-settings: "tnum" 1;

    /* Mimic 'vertical-align: super' (browser style for sup tag)
     * without causing a gap in our text's implicit grid. */
    vertical-align: baseline;
    position: relative;
    top: var(--side-note-sup-offset);
  }

  sup {
    font-weight: inherit;
  }

  /* Make the superscript hang. */
  .sidenote:before { left: var(--side-note-number-hang-left); }
  /* Get first first column of first row to line up with other rows. */
  .sidenote { text-indent: var(--side-note-text-indent); }

  /*}}} */
  /* --- Side note input controls --- {{{ */

  input.margin-toggle {
      display: none;
  }
  label.margin-toggle:not(.sidenote-number) {
      display: none;
  }
  label.sidenote-number {
      display: inline;
  }

  /* Unfortunately, variables aren't in scope here.
   * See calculations in Horizontal layouting.
   */
  @media screen and (max-width: calc(26px + 550px + 26px + 169px + 26px - 1px)) {
    .margin-toggle:checked + .sidenote,
    .margin-toggle:checked + .marginnote {
      margin-top: var(--side-note-line-height);
      vertical-align: baseline;
    }

    label.margin-toggle {
      color: var(--color-link);
    }

    label.margin-toggle:not(.sidenote-number) {
      display: inline;
    }

    label {
      cursor: pointer;
    }
  }

  /* }}} */
  /* }}} */
  /* ----- Headings ------------------------------------------------------ {{{ */

  h1, h2 {
    font-family: var(--font-family-heading);
    font-weight: var(--heading-font-weight);
  }

  h4, h5, h6 {
    font-weight: normal;
  }

  h1.title {
    margin-top: var(--line-height);
    margin-bottom: var(--line-height);
    font-size: var(--title-font-size);
    line-height: var(--title-line-height);
  }

  h1.title code {
    font-size: var(--title-code-font-size);
  }

  h1:not(.title) {
    font-size: var(--h1-font-size);
    line-height: var(--h1-line-height);
    word-spacing: var(--h1-word-spacing);

    margin-top: var(--h1-margin-top);
    margin-bottom: var(--h1-margin-bottom);
  }

  h1:not(.title) code {
    font-size: var(--h1-code-font-size);
  }

  h2 {
    font-size: var(--h2-font-size);
    line-height: var(--h2-line-height);
    word-spacing: var(--h2-word-spacing);

    margin-top: var(--h2-margin-top);
    margin-bottom: var(--h2-margin-bottom);
  }

  h2 code {
    font-size: var(--h2-code-font-size);
  }

  h3 {
    font-size: var(--font-size);
    line-height: var(--line-height);
    font-weight: bold;
  }

  h1:not(.title) + *, h1:not(.title) + p { margin-top: var(--h1-margin-bottom); }
  h2 + *, h2 + p                         { margin-top: var(--h2-margin-bottom); }
  h3 + *, h3 + p                         { margin-top: 0; }

  /* }}} */
  /* ----- Prose --------------------------------------------------------- {{{ */

  p, main > ul, main > ol, div.sourceCode, main > pre, img, table {
    margin-top: var(--line-height);
    margin-bottom: var(--line-height)
  }

  ol {
    margin-left: var(--ol-indent-size);
  }

  ul.task-list {
    list-style: none;
    margin-left: var(--ul-indent-size);
  }

  ul.task-list > li {
    position: relative;
  }

  ul.task-list > li > input[type="checkbox"] {
    position: absolute;
    left: calc(-1 * var(--ul-indent-size));
    height: var(--line-height);
  }

  ol > li {
    padding-left: var(--ol-li-padding-left);
  }

  ol                         { list-style-type: decimal; }
  ol ol                      { list-style-type: lower-alpha; }
  ol ol ol                   { list-style-type: lower-roman; }
  ol ol ol ol                { list-style-type: decimal; }
  ol ol ol ol ol             { list-style-type: lower-alpha; }
  ol ol ol ol ol ol          { list-style-type: lower-roman; }
  ol ol ol ol ol ol ol       { list-style-type: decimal; }
  ol ol ol ol ol ol ol ol    { list-style-type: lower-alpha; }
  ol ol ol ol ol ol ol ol ol { list-style-type: lower-roman; }

  ul                         { list-style-type: disc; }
  ul ul                      { list-style-type: circle; }
  ul ul ul                   { list-style-type: square; }
  ul ul ul ul                { list-style-type: disc; }
  ul ul ul ul ul             { list-style-type: circle; }
  ul ul ul ul ul ul          { list-style-type: square; }
  ul ul ul ul ul ul ul       { list-style-type: disc; }
  ul ul ul ul ul ul ul ul    { list-style-type: circle; }
  ul ul ul ul ul ul ul ul ul { list-style-type: square; }

  blockquote {
    border-left: 1px solid var(--color-text-secondary);
    padding-left: 1.5rem;

    font-style: italic;
  }

  blockquote > p {
    margin-top: 0;
  }

  blockquote em, blockquote i, blockquote .sidenote-wrapper {
    font-style: normal;
  }

  hr {
    margin-top: var(--hr-margin-top);
    margin-bottom: var(--hr-margin-bottom);
    border-style: solid;
    color: var(--color-border-heavy);
    border-width: 1px 0 0;
  }

  a code, a:link code, a:visited code,
  a, a:link, a:visited {
    color: var(--color-link);
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  span.mark, mark {
    /* Reset browser styles */
    color: inherit;

    padding: 2px 0 1px;
  }
  span.mark.red,    mark.red    { background-color: var(--highlight-red);    }
  span.mark.yellow, mark.yellow { background-color: var(--highlight-yellow); }
  span.mark.green,  mark.green  { background-color: var(--highlight-green);  }
  span.mark.blue,   mark.blue   { background-color: var(--highlight-blue);   }
  span.mark.purple, mark.purple { background-color: var(--highlight-purple); }

  .subtitle {
    margin-top: 0;
  }
  .author, .date {
    margin-top: 0;
    margin-bottom: 0;
  }
  .signoff {
    margin-top: calc(4 * var(--line-height));
    margin-bottom: calc(4 * var(--line-height));
  }

  /* Pandoc utility classes */
  span.smallcaps{ font-variant: small-caps; }
  span.underline{ text-decoration: underline; }

  .katex-display {
    background: var(--background-color);
    transform: translateZ(0px);
  }

  @media print {
    .katex-display {
      background-color: initial;
    }
  }

  /* }}} */
  /* ----- Code ---------------------------------------------------------- {{{ */

  /* Pandoc code blocks with a language look like div.sourceCode > pre.sourceCode
   * Otherwise, it's just a pre (without .sourceCode)
   *
   * The 'code' element is tricky because it's used for inline code and code in a
   * pre.
   */

  code {
    font-family: var(--font-family-code);

    word-spacing: normal;

    /* Only for inline code */
    color: var(--color-inline-code);
    background-color: var(--color-inline-code-bg);
    font-size: var(--inline-code-font-size);
    margin: 0;
    padding: 2px 0 1px;
    border: 1px solid var(--color-border);
    border-radius: 1px;
  }

  .sidenote code,
  .marginnote code {
    font-size: var(--side-note-code-font-size);
  }

  pre code {
    /* Reset some changes meant to be inline-only */
    color: inherit;
    background-color: inherit;
    font-size: var(--code-block-font-size);
    line-height: var(--line-height);
    margin: initial;
    padding: initial;
    border: initial;
    border-radius: initial;
  }

  pre > code {
    position: relative; /* For line highlights */
    display: inline-block;
    min-width: 100%;
    z-index: 1;

    white-space: pre-wrap;

    padding: 0 var(--code-block-side-padding);
  }

  code.sourceCode::selection {
    /* Prevent bug where far right edge of text box shows as selected. */
    background: transparent;
  }

  .wide > pre, .wide > div.sourceCode {
    /* Put this in front of the table of contents */
    transform: translateZ(0px);
  }

  .wide pre > code {
    white-space: pre;
  }

  pre.numberSource code {
    counter-reset: source-line 0;
  }

  pre > code.sourceCode > span {
    line-height: var(--line-height);

    display: inline-block;
    min-width: 100%;
  }

  div.sourceCode {
    /* Need to make room for line numbers (even if they're not going to be used).
     * Width doesn't matter, just needs to be big enough to hold the largest line
     * number. */
    --line-numbers-width: calc(4 * var(--line-numbers-font-size));
    --line-numbers-negative-width: calc(-1 * var(--line-numbers-width));
    margin-left: var(--line-numbers-negative-width);
  }
  div.sourceCode > pre {
    margin-left: var(--line-numbers-width);
  }
  pre.numberSource > code.sourceCode > span {
    counter-increment: source-line;
    padding-left: var(--line-numbers-width);
    text-indent: var(--line-numbers-negative-width);
    position: relative;
    left: var(--line-numbers-negative-width);
  }
  pre.numberSource > code.sourceCode > span > a:first-child::before {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

    content: counter(source-line);
    font-size: var(--line-numbers-font-size);
    text-decoration: none;

    position: relative;
    text-align: right;
    display: inline-block;

    padding: 0 calc(2 * var(--code-block-side-padding));
    width: var(--line-numbers-width);
  }
  pre > code.sourceCode > span > a:first-child::before:hover {
    text-decoration: underline;
  }

  /* Utility class for code blocks that contain things like box drawing characters, where it's nice for things to touch. */
  .tight-code pre,
  pre.tight-code {
    padding-top: var(--tight-code-padding-top);
  }

  pre.tight-code code,
  .tight-code pre code,
  .tight-code pre > code.sourceCode > span,
  pre.tight-code > code.sourceCode > span {
    line-height: var(--tight-code-line-height);
  }

  /* --- Code line highlights --- {{{ */
  /* I used some code I contributed to owickstrom's pandoc-emphasize-code[1] as
   * inspiration for these changes.
   *
   * The novel part is using :nth-of-type(...) selectors and CSS classes, instead
   * of needing a pandoc filter. This means that we can stick with pandoc's
   * default syntax highlighter, and not need to requirer JavaScript for syntax
   * highlighting. It has the obvious limitation that it places a fixed limit on
   * lines that can be highlighted, but these additional CSS styles are easy
   * enough to write, so anyone who needs more lines can write their own
   * stylesheet and include it to add more after the fact.
   *
   * [1] https://github.com/owickstrom/pandoc-emphasize-code/pull/3
   */

  pre > code.sourceCode > span::after {
    position: absolute;
    background-color: var(--color-code-highlight-bg);
    z-index: -1;
    left: calc(var(--line-numbers-width) - var(--code-block-side-padding));
    right: calc(var(--line-numbers-negative-width) - var(--code-block-side-padding));
    top: 0;
    height: 100%;
  }

  pre.hl-1  > code.sourceCode > span:nth-of-type(1)::after  { content: ""; }
  pre.hl-2  > code.sourceCode > span:nth-of-type(2)::after  { content: ""; }
  pre.hl-3  > code.sourceCode > span:nth-of-type(3)::after  { content: ""; }
  pre.hl-4  > code.sourceCode > span:nth-of-type(4)::after  { content: ""; }
  pre.hl-5  > code.sourceCode > span:nth-of-type(5)::after  { content: ""; }
  pre.hl-6  > code.sourceCode > span:nth-of-type(6)::after  { content: ""; }
  pre.hl-7  > code.sourceCode > span:nth-of-type(7)::after  { content: ""; }
  pre.hl-8  > code.sourceCode > span:nth-of-type(8)::after  { content: ""; }
  pre.hl-9  > code.sourceCode > span:nth-of-type(9)::after  { content: ""; }
  pre.hl-10 > code.sourceCode > span:nth-of-type(10)::after { content: ""; }
  pre.hl-11 > code.sourceCode > span:nth-of-type(11)::after { content: ""; }
  pre.hl-12 > code.sourceCode > span:nth-of-type(12)::after { content: ""; }
  pre.hl-13 > code.sourceCode > span:nth-of-type(13)::after { content: ""; }
  pre.hl-14 > code.sourceCode > span:nth-of-type(14)::after { content: ""; }
  pre.hl-15 > code.sourceCode > span:nth-of-type(15)::after { content: ""; }
  pre.hl-16 > code.sourceCode > span:nth-of-type(16)::after { content: ""; }
  pre.hl-17 > code.sourceCode > span:nth-of-type(17)::after { content: ""; }
  pre.hl-18 > code.sourceCode > span:nth-of-type(18)::after { content: ""; }
  pre.hl-19 > code.sourceCode > span:nth-of-type(19)::after { content: ""; }
  pre.hl-20 > code.sourceCode > span:nth-of-type(20)::after { content: ""; }
  pre.hl-21 > code.sourceCode > span:nth-of-type(21)::after { content: ""; }
  pre.hl-22 > code.sourceCode > span:nth-of-type(22)::after { content: ""; }
  pre.hl-23 > code.sourceCode > span:nth-of-type(23)::after { content: ""; }
  pre.hl-24 > code.sourceCode > span:nth-of-type(24)::after { content: ""; }
  pre.hl-25 > code.sourceCode > span:nth-of-type(25)::after { content: ""; }
  pre.hl-26 > code.sourceCode > span:nth-of-type(26)::after { content: ""; }
  pre.hl-27 > code.sourceCode > span:nth-of-type(27)::after { content: ""; }
  pre.hl-28 > code.sourceCode > span:nth-of-type(28)::after { content: ""; }
  pre.hl-29 > code.sourceCode > span:nth-of-type(29)::after { content: ""; }
  pre.hl-30 > code.sourceCode > span:nth-of-type(30)::after { content: ""; }
  pre.hl-31 > code.sourceCode > span:nth-of-type(31)::after { content: ""; }
  pre.hl-32 > code.sourceCode > span:nth-of-type(32)::after { content: ""; }
  pre.hl-33 > code.sourceCode > span:nth-of-type(33)::after { content: ""; }
  pre.hl-34 > code.sourceCode > span:nth-of-type(34)::after { content: ""; }
  pre.hl-35 > code.sourceCode > span:nth-of-type(35)::after { content: ""; }
  pre.hl-36 > code.sourceCode > span:nth-of-type(36)::after { content: ""; }
  pre.hl-37 > code.sourceCode > span:nth-of-type(37)::after { content: ""; }
  pre.hl-38 > code.sourceCode > span:nth-of-type(38)::after { content: ""; }
  pre.hl-39 > code.sourceCode > span:nth-of-type(39)::after { content: ""; }
  pre.hl-40 > code.sourceCode > span:nth-of-type(40)::after { content: ""; }

  /* }}} */

  /* }}} */
  /* ----- Images and figures -------------------------------------------- {{{ */

  /* There's only a figure if there's a caption. Tighten things up. */
  figure {
    margin-bottom: var(--captioned-figure-gap);
  }

  figure + p {
    margin-top: var(--captioned-figure-gap);
  }

  figure > img, figure > pre, figure > div.sourceCode {
    margin-bottom: var(--figcaption-gap);
  }

  img {
    display: block;
  }

  .wide img {
    /* Put this in front of the table of contents */
    transform: translateZ(0px);
  }

  figcaption {
    font-size: var(--figcaption-font-size);
    line-height: var(--figcaption-line-height);
    font-style: italic;
    text-align: center;
    color: var(--color-text-secondary);
  }

  .left-align-caption figcaption {
    text-align: left;
  }

  figcaption code {
    font-size: var(--figcaption-code-font-size);
  }

  /* }}} */
  /* ----- Tables -------------------------------------------------------- {{{ */

  table {
    -webkit-font-feature-settings: "tnum" 1;
    font-feature-settings: "tnum" 1;

    font-size: var(--table-font-size);
    line-height: var(--table-line-height);

    border-spacing: 0;
    border-collapse: collapse;
    border: 1px solid var(--color-border-heavy);

    width: 100%;

    /* Solid background to occlude table of contents */
    background-color: var(--background-color);
  }

  @media print {
    table {
      background-color: initial;
    }
  }

  table code {
    font-size: var(--table-code-font-size);
  }

  table pre code {
    font-size: inherit;
  }

  .wide table {
    /* Put this in front of the table of contents */
    transform: translateZ(0px);
  }

  table td, table th {
    border: 1px solid var(--color-border-heavy);
    padding: 5px 8px;
    min-width: 100px;
  }
  table th {
    background-color: var(--color-table-heading);
  }

  table > caption {
    caption-side: bottom;
    margin-top: var(--figcaption-gap);
    margin-bottom: calc(var(--captioned-figure-gap) - var(--line-height));
    font-size: var(--figcaption-font-size);
    line-height: var(--figcaption-line-height);
    font-style: italic;
    text-align: center;
    color: var(--color-text-secondary);
  }

  .left-align-caption table > caption {
    text-align: left;
  }

  table > caption code {
    font-size: var(--figcaption-code-font-size);
  }

  /* --- Notes are just single cell tables --- */

  .note table {
    font-size: inherit;
    line-height: inherit;
  }
  .note table, .note td {
    border: none;
  }

  .note.red    td { background: var(--highlight-red); }
  .note.yellow td { background: var(--highlight-yellow); }
  .note.green  td { background: var(--highlight-green); }
  .note.blue   td { background: var(--highlight-blue); }
  .note.purple td { background: var(--highlight-purple); }

  /* }}} */
  /* ----- Table of contents --------------------------------------------- {{{ */

  .date.before-toc {
    padding-bottom: var(--line-height);
  }

  nav#TOC label {
    color: var(--color-link);
    cursor: pointer;
  }

  nav#TOC code,
  nav#TOC a,
  nav#TOD a:link,
  nav#TOD a:visited {
    color: var(--color-text-secondary);
  }

  header {
    margin-bottom: var(--line-height);
  }

  .date.before-toc {
    padding-bottom: initial;
  }

  nav#TOC code {
    font-size: var(--nav-toc-code-font-size);
  }

  nav#TOC a:hover,
  nav#TOC a:hover code {
    text-decoration: none;
    color: var(--color-link);
  }

  /* }}} */
  /* ----- Horizontal layouting (main, side notes, extra-wide) ----------- {{{ */

  .sidenote,
  .marginnote {
    float: right;
    clear: right;
    position: relative;

    width: var(--computed-width);
    max-width: var(--side-note-max-width);
    margin-right: calc(-1 * min(var(--computed-width), var(--side-note-max-width)) - var(--margin-left));
  }

  /* --- Side notes and table of contents always visible --- {{{ */

  /* Unfortunately, variables aren't in scope here.
   * 745px = --main-width
   * 52px = 2 * --line-height
   * 206px = side note min width
   */
  @media screen and (min-width: calc(745px + 2 * (52px + 206px + 52px))) {
    header,
    main,
    footer {
      max-width: var(--main-width);
    }

    header,
    main,
    footer {
      margin-left: auto;
      margin-right: auto;
    }

    .sidenote,
    .marginnote {
      --margin-left: calc(2 * var(--line-height));
      --margin-right: var(--margin-left);
      --computed-width: calc((100vw - 100%) / 2 - var(--margin-right) - var(--margin-left));
    }

    .wide {
      width: 100%;
      overflow-x: auto;
    }

    .wide.extra-wide {
      margin-left: calc((1 - var(--extra-wide-scale-factor)) / 2 * 100%);
      width: calc(var(--extra-wide-scale-factor) * 100%);
    }

    .wide.full-width {
      margin-left: calc(var(--line-height) - ((100vw - var(--main-width)) / 2));
      width: calc(100vw - 2 * var(--line-height));
    }

    .wide.extra-wide figcaption,
    .wide.extra-wide table > caption {
      margin-left: calc(((var(--extra-wide-scale-factor) - 1) / 2) * var(--main-width));
      max-width: var(--main-width);
      margin-right: calc(100% - var(--main-width) - (((var(--extra-wide-scale-factor) - 1) / 2) * var(--main-width)));
    }

    .wide.full-width figcaption,
    .wide.full-width table > caption {
      margin-left: calc((100vw - var(--main-width)) / 2 - var(--line-height));
      max-width: var(--main-width);
      margin-right: calc(100% - var(--main-width) - ((100vw - var(--main-width)) / 2 - var(--line-height)));
    }
  }

  /* }}} */
  /* --- Side notes visibile, table of contents collapsed, double-wide margins --- {{{ */

  /* Unfortunately, variables aren't in scope here.
   * 745px = --main-width
   * 52px = 2 * --line-height
   * 206px = side note min width
   */
  @media screen and (min-width: calc(52px + 745px + 52px + 206px + 52px)) and (max-width: calc(745px + 2 * (52px + 206px + 52px) - 1px)) {
    .sidenote,
    .marginnote {
      --margin-left: calc(2 * var(--line-height));
      --margin-right: var(--margin-left);
      --computed-width: calc(100vw - var(--main-width) - calc(2 * var(--line-height)) - var(--margin-right) - var(--margin-left));
    }

    .wide {
      width: 100%;
      overflow-x: auto;
      overflow-y: hidden;
    }

    .wide.extra-wide {
      margin-left: calc(-1 * var(--line-height));
      width: calc(100vw - 2 * var(--line-height));
      max-width: calc(var(--extra-wide-scale-factor) * var(--main-width));
    }

    .wide.full-width {
      margin-left: calc(-1 * var(--line-height));
      width: calc(100vw - 2 * var(--line-height));
      max-width: calc(100vw - 2 * var(--line-height));
    }

    .wide.extra-wide .katex-display,
    .wide.full-width .katex-display {
      padding-left: var(--line-height);
      padding-right: var(--line-height);
    }

    .wide.extra-wide .katex-display,
    .wide.extra-wide .katex-display > .katex,
    .wide.full-width .katex-display,
    .wide.full-width .katex-display > .katex {
      text-align: left;
    }

    .wide.extra-wide figcaption,
    .wide.extra-wide table > caption,
    .wide.full-width figcaption,
    .wide.full-width table > caption {
      text-align: left;
      margin-left: var(--line-height);
      max-width: var(--main-width);
    }
  }

  /* }}} */
  /* --- Side notes visibile, table of contents collapsed --- {{{ */

  /* Unfortunately, variables aren't in scope here.
   * 550px = --main-width-narrow
   * 26px = --line-height
   * 169px = side note min width narrow
   */
  @media screen and (min-width: calc(26px + 550px + 26px + 169px + 26px)) and (max-width: calc(52px + 745px + 52px + 206px + 52px - 1px)) {
    .sidenote,
    .marginnote {
      --margin-left: var(--line-height);
      --margin-right: var(--line-height);
      --computed-width: calc(100vw - var(--main-width-narrow) - var(--line-height) - var(--margin-right) - var(--margin-left));
    }

    .wide {
      width: var(--main-width);
      overflow-x: auto;
      overflow-y: hidden;
    }

    .wide .katex-display,
    .wide .katex-display > .katex {
      text-align: left;
    }

    .wide figcaption,
    .wide table > caption {
      text-align: left;
      max-width: var(--main-width-narrow);
    }

    .wide.extra-wide,
    .wide.full-width {
      width: calc(100vw - 2 * var(--line-height));
    }
  }

  /* }}} */
  /* --- Side notes and table of contents collapsed --- {{{ */

  /* Unfortunately, variables aren't in scope here.
   * See calculations above.
   */
  @media screen and (max-width: calc(26px + 550px + 26px + 169px + 26px - 1px)) {
    .sidenote,
    .marginnote {
      display: none;
    }

    .wide {
      width: 100%;
      overflow-x: auto;
      overflow-y: hidden;
    }

    .wide .katex-display,
    .wide .katex-display > .katex {
      text-align: left;
    }

    .wide figcaption,
    .wide table > caption {
      text-align: left;
      max-width: calc(100vw - 2 * var(--line-height));
    }
  }

  /* }}} */
  /* --- Paged media (print styles) --- {{{ */
  @page {
    size: letter;
    margin: 0.5in;
    /* To make room for line numbers in left margin. */
    margin-left: 0.25in;
  }

  @media print {
    :root {
      --line-height: 18px;
      --font-size: 12px;

      --inline-code-font-size: 11px;
      --code-block-font-size: 10px;
      --code-block-side-padding: 6px;
      --line-numbers-font-size: 8.5px;

      --tight-code-line-height: 12.5px;
      --tight-code-padding-top: 2px;

      --side-note-line-height: 14px;
      --side-note-font-size: 9px;
      --side-note-code-font-size: 9px;
      --side-note-baseline-offset: 3px;
      --side-note-sup-offset: -4px;
      --side-note-number-hang-left: -4px;
      --side-note-text-indent: -6.5px;

      --title-font-size: 30px;
      --title-code-font-size: 29px;
      --title-line-height: 37px;
      --title-margin-top: 71px;

      --h1-font-size: 22px;
      --h1-code-font-size: 20px;
      --h1-line-height: 28px;
      --h1-word-spacing: 0.5px;
      --h1-margin-top: 18px;
      --h1-margin-bottom: 6px;

      --h2-font-size: 16.5px;
      --h2-code-font-size: 15px;
      --h2-line-height: 22px;
      --h2-word-spacing: 0px;
      --h2-margin-top: 14px;
      --h2-margin-bottom: 4.5px;

      --ul-indent-size: 18px;
      --ol-indent-size: 14px;

      --hr-margin-top: 14px;

      --figcaption-line-height: 16px;
      --figcaption-font-size: 10px;
      --figcaption-code-font-size: 9.5px;
      --figcaption-gap: 4.5px;
      --captioned-figure-gap: 7.5px;

      --table-line-height: 16px;
      --table-font-size: 10px;
      --table-code-font-size: 9.5px;

      --nav-toc-font-size: 8.5px;
      --nav-toc-code-font-size: 8.5px;
    }

    body {
      padding-top: 0;
      /* To make room for line numbers in left margin. */
      padding-left: 0.25in;
    }

    .sidenote,
    .marginnote {
      width: 2in;
      margin-right: -2.25in;
    }

    .wide {
      width: 7.5in;
      overflow-x: hidden;
      overflow-y: hidden;
    }

    .wide .katex-display,
    .wide .katex-display > .katex {
      text-align: left;
    }

    .wide figcaption,
    .wide table > caption {
      text-align: left;
      width: 5.25in;
    }

    .wide pre > code {
      white-space: pre-wrap;
    }
  }

  h1, h2, h3 {
    page-break-after: avoid;
  }

  table, figure, pre, img {
    page-break-inside: avoid;
  }
  /* }}} */
  /* }}} */

  /* vim:fdm=marker
   */

  </style>
  <!-- CSS added by filter 'toc-css.lua' for TOC hovering to the side -->
  <!-- TODO: try doing sometthing in px instead of cm to make it more device independent -->
  <style>
  body {
    padding-left: 1.5cm;
    padding-right: 1cm;
    transition: 0.5s;
  }
  nav {
    width: 1cm;
    margin-left: -1.5cm;
    color: grey;
    transition: 0.5s;
    float: left;
    position: fixed;
    top: 0;
    bottom: 0;
    white-space: nowrap;
    overflow: hidden;
    overflow-y: scroll;
    transition: 0.5s;
    z-index: 10;
  }
  nav::-webkit-scrollbar {
    display: none;
  }
  nav a, nav a:visited {
    color: grey;
  }
  nav h2:before {
    content: "≡ ";
    font-size: 150%;
  }
  nav h2:after {
    content: " ◂";
  }
  nav > ul {
    padding-left: 1em;
  }
  nav li {
    margin-left: 1em;
    padding-left: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  nav ul {
    padding-left: 1em;
    margin-left: 0;
  }
  nav li > a:not(:only-child):before {
    content: "▸ ";
  }
  nav li li li {
    font-size: smaller;
  }
  nav ul li ul  {
    visibility: hidden;
    display: none;
    margin-top: 0.2em;
    margin-bottom: 0.2em;
    transition: 0.5s;
  }
  .paddingleft {
    padding-left: 11cm;
    transition: 0.5s;
  }
  .navside {
    width: 10cm;
    margin-left: -10.5cm;
    padding-right: 1em;
    transition: 0.5s;
  }
  .navside h2:after {
    content: " ▸ ";
  }
  .navshown {
    width: 50%;
    transition: 0.5s;
    background-color: rgba(16, 13, 13, 0.95);
  }
  .subShow > ul {
    visibility: visible;
    display: block;
    transition: 0.5s;
  }
  .subShow > a:not(:only-child):before {
    content: " ▾ ";
  }

  .toc-invisible {
    visibility: hidden;
  }
  .navside > .toc-invisible {
    visibility: visible;
  }
  .navshown > .toc-invisible {
    visibility: visible;
  }
  </style>
</head>
<body>

<header>
<h1 class="title">Glossary</h1>
<blockquote class="metadata">
  <p class="date before-toc"><time datetime="Last updated 27/06/2023 at 19:52">Last updated 27/06/2023 at 19:52</time></p>
</blockquote>
</header>

  <nav id="TOC" role="doc-toc">
      <h2 id="toc-title">Contents</h2>
    <ul>
    <li><a href="#asterism-">Asterism (⁂)</a></li>
    <li><a href="#attg">ATTG</a></li>
    <li><a href="#attributes">Attributes</a></li>
    <li><a href="#authors-notes-an">Author's Notes (A/N)</a></li>
    <li><a href="#banned-tokens">Banned Tokens</a></li>
    <li><a href="#brackets">Brackets</a></li>
    <li><a href="#branch">Branch</a></li>
    <li><a href="#calliope-model">Calliope (model)</a></li>
    <li><a href="#canvas">Canvas</a></li>
    <li><a href="#cascading-activation">Cascading Activation</a></li>
    <li><a href="#caveman-format">Caveman Format</a></li>
    <li><a href="#clio">Clio</a></li>
    <li><a href="#context">Context</a></li>
    <li><a href="#context-window">Context Window</a></li>
    <li><a href="#context-viewer">Context Viewer</a></li>
    <li><a href="#dataset">Dataset</a></li>
    <li><a href="#dinkus-">Dinkus (***)</a></li>
    <li><a href="#end-of-sampling-eos">End of Sampling (EOS)</a></li>
    <li><a href="#end-of-text-token-endoftext">End of Text Token (&lt;|endoftext|&gt;)</a></li>
    <li><a href="#entry-or-lorebook-entry">Entry (or Lorebook Entry)</a></li>
    <li><a href="#ephemeral-context">Ephemeral Context</a></li>
    <li><a href="#euterpe-model">Euterpe (Model)</a></li>
    <li><a href="#finetune">Finetune</a></li>
    <li><a href="#flatten">Flatten</a></li>
    <li><a href="#format-or-lorebook-format">Format (or Lorebook Format)</a></li>
    <li><a href="#generation-or-ai-generation">Generation (or AI Generation)</a></li>
    <li><a href="#generative-pre-trained-transformer-gpt">Generative Pre-trained Transformer (GPT)</a></li>
    <li><a href="#guidance">Guidance</a></li>
    <li><a href="#image-resolution">Image Resolution</a></li>
    <li><a href="#image-to-image-img2img">Image To Image (Img2Img)</a></li>
    <li><a href="#inline-generation">Inline Generation</a></li>
    <li><a href="#inpainting">Inpainting</a></li>
    <li><a href="#lore-generator">Lore Generator</a></li>
    <li><a href="#krake-model">Krake (Model)</a></li>
    <li><a href="#lorebook">Lorebook</a></li>
    <li><a href="#lorebook-keys">Lorebook Keys</a></li>
    <li><a href="#loss-or-training-loss">Loss (or Training Loss)</a></li>
    <li><a href="#loss-graph">Loss Graph</a></li>
    <li><a href="#memory">Memory</a></li>
    <li><a href="#model">Model</a></li>
    <li><a href="#module-or-ai-module">Module (or AI Module)</a></li>
    <li><a href="#module-training">Module Training</a></li>
    <li><a href="#nai-diffusion-anime-curated">NAI Diffusion Anime Curated</a></li>
    <li><a href="#nai-diffusion-anime-full">NAI Diffusion Anime Full</a></li>
    <li><a href="#nai-diffusion-furry">NAI Diffusion Furry</a></li>
    <li><a href="#noise">Noise</a></li>
    <li><a href="#nucleus-sampling-top-p">Nucleus Sampling (Top-P)</a></li>
    <li><a href="#order-of-insertion">Order of Insertion</a></li>
    <li><a href="#output">Output</a></li>
    <li><a href="#perspective-or-pov">Perspective (or POV)</a></li>
    <li><a href="#phrase-bias">Phrase Bias</a></li>
    <li><a href="#placeholder">Placeholder</a></li>
    <li><a href="#preamble">Preamble</a></li>
    <li><a href="#prefix">Prefix</a></li>
    <li><a href="#preset-or-generation-preset">Preset (or Generation Preset)</a></li>
    <li><a href="#prompt">Prompt</a></li>
    <li><a href="#prose">Prose</a></li>
    <li><a href="#quality-tags">Quality Tags</a></li>
    <li><a href="#randomness-or-temperature">Randomness (or Temperature)</a></li>
    <li><a href="#redo-tree">Redo Tree</a></li>
    <li><a href="#repetition-penalty">Repetition Penalty</a></li>
    <li><a href="#reserved-tokens">Reserved Tokens</a></li>
    <li><a href="#retry">Retry</a></li>
    <li><a href="#sampling">Sampling</a></li>
    <li><a href="#scale">Scale</a></li>
    <li><a href="#scenario">Scenario</a></li>
    <li><a href="#search-range">Search Range</a></li>
    <li><a href="#seed">Seed</a></li>
    <li><a href="#separator-----">Separator (----)</a></li>
    <li><a href="#sigurd-model">Sigurd (model)</a></li>
    <li><a href="#stable-diffusion">Stable Diffusion</a></li>
    <li><a href="#step">Step</a></li>
    <li><a href="#storage">Storage</a></li>
    <li><a href="#story">Story</a></li>
    <li><a href="#story-tag">Story Tag</a></li>
    <li><a href="#stream-responses">Stream Responses</a></li>
    <li><a href="#subcontext">Subcontext</a></li>
    <li><a href="#suffix">Suffix</a></li>
    <li><a href="#tags">Tags</a></li>
    <li><a href="#tail-free-sampling-tfs">Tail-Free Sampling (TFS)</a></li>
    <li><a href="#text-adventure-module">Text Adventure Module</a></li>
    <li><a href="#theme">Theme</a></li>
    <li><a href="#tier">Tier</a></li>
    <li><a href="#token">Token</a></li>
    <li><a href="#token-budget">Token Budget</a></li>
    <li><a href="#token-id">Token ID</a></li>
    <li><a href="#tokenization">Tokenization</a></li>
    <li><a href="#tokensafe">Tokensafe</a></li>
    <li><a href="#top-a">Top-A</a></li>
    <li><a href="#top-k">Top-K</a></li>
    <li><a href="#top-kek">Top-Kek</a></li>
    <li><a href="#top-p">Top-P</a></li>
    <li><a href="#typical-sampling">Typical Sampling</a></li>
    <li><a href="#train-a-model">Train (a Model)</a></li>
    <li><a href="#trim">Trim</a></li>
    <li><a href="#undesired-content">Undesired Content</a></li>
    </ul>
</nav>

<main>
<p>This page aims to define terms that are often used by the community and may not be immediately accessible to newcomers.</p>
<h2 id="asterism-">Asterism (⁂)</h2>
<p><em>Typography</em></p>
<p>A group of three asterisks brought together as a single symbol. Usually used to separate stories in the finetune, making it a powerful separator. Similar, but not identical to a Dinkus, which is weaker.</p>
<h2 id="attg">ATTG</h2>
<p><em>Technique</em></p>
<p>ATTG stands for the <code>[ Author: …; Title: …; Tags: …; Genre: … ]</code> metadata, which is present in the dataset. This row can be inserted at the top of the Context to heavily influence the AI output. The first two categories are usually omitted as they're less useful than Tags and Genre.</p>
<h2 id="attributes">Attributes</h2>
<p><em>Technique</em></p>
<p>Attributes is a technique where various data --- such as characters or locations --- is formatted similarly to database entries or wiki-style data blocks. Due to these being common in both the Base and the Dataset, the Attributes can be as efficient as prose --- and often easier to write.</p>
<h2 id="authors-notes-an">Author's Notes (A/N)</h2>
<p><em>Text Injection, Feature</em></p>
<p>A type of <a href="Context.html">Text Injection</a> that is usually situated three newlines from the bottom of the context. It is much stronger than Memory and can often be disruptive, especially if the inserted text doesn't fit the output seamlessly. The typical side-effects include looping and degradation of the output quality. Use with caution.</p>
<h2 id="banned-tokens">Banned Tokens</h2>
<p><em>Generation, Feature</em></p>
<p>A token the AI is not allowed to generate. Instead, the AI will use the next most likely token.</p>
<h2 id="brackets">Brackets</h2>
<p><em>Typography</em></p>
<p>Shorthand for <em>Square Brackets</em>, which are these symbols: [ ]. They are part of the finetune data, and used to contain metadata about the text files. They are traditionally used in <a href="Context.html">Injected Text</a> to separate it from story text.</p>
<h2 id="branch">Branch</h2>
<p><em>Generation, Writing</em></p>
<p>A version of the story. When you redo, or undo then edit, you create a new branch. Think of it like time travel.</p>
<h2 id="calliope-model">Calliope (model)</h2>
<p><em>AI</em></p>
<p>A finetuned version of the GPT-NEO 2.7B model. It is inferior in creative performance to Sigurd, but very lightweight and can run on cheaper, slower hardware. It was used by NovelAI during the Pre-Alpha and Alpha stages.</p>
<h2 id="canvas">Canvas</h2>
<p><em>Image Generation</em></p>
<p>The area taken by the image. You can freely edit it directly in NovelAI, or import it in the image editing tool of your choice.</p>
<h2 id="cascading-activation">Cascading Activation</h2>
<p><em>Injected Text, Generation</em></p>
<p>A flag that tells a Lorebook entry to check for other text injections (Memory, Author's Note) for its keys, rather than only the story text.</p>
<h2 id="caveman-format">Caveman Format</h2>
<p><em>Writing, Technique</em></p>
<p>Writing while removing most grammatical words, and focusing only on words that carry semantic meaning. As an example, <code>John usually wears a bright blue coat which he likes dearly</code> would become <code>john wear bright blue coat, john like coat</code>. It is used for lorebook entries to reinforce connections between subjects and objects and reduce token use at the expense of writing quality. Caveman is mostly obsolete in advanced models.</p>
<h2 id="clio">Clio</h2>
<p><em>AI</em></p>
<p>A in-house model trained by NovelAI. It boasts a much larger context and higher performance than Krake with only 3 Billion parameters.</p>
<h2 id="context">Context</h2>
<p><em>Injected Text, Generation</em></p>
<p>All the text that the AI has in its memory before it attempts to generate more text. This is all the activated injected text, plus all the story text that can fit inside the context window.</p>
<h2 id="context-window">Context Window</h2>
<p><em>AI, Limit</em></p>
<p>GPT-J and GPT-NEO both share a limit of 2048 tokens, or ~9000 Latin Alphabet characters used as a person would need to communicate in a natural manner. This is the maximum memory that the AI can use. On Tablet tier, the window is 1024 Tokens.</p>
<p>For Clio, this limit is 8192 Context for Opus, which is around 35000 characters.</p>
<h2 id="context-viewer">Context Viewer</h2>
<p><em>Injected Text, Feature</em></p>
<p>A tool that lets you visualize all text injections, and what the context window contains. This can help diagnose generation problems due to poor text injection settings.</p>
<h2 id="dataset">Dataset</h2>
<p><em>AI</em></p>
<p>A batch of text files, used for fine tuning or module training. It must be presented in a specific format for best results.</p>
<h2 id="dinkus-">Dinkus (***)</h2>
<p><em>Typography</em></p>
<p>A set of three asterisks in a row. Often used to separate large sections. Breaks the current event sequence before resuming generation. Can be used for things like short time skips, depending on how the previous paragraph ended. Since Euterpe, Dinkus has been used mainly for prose. For separating data, see <code>Separator (----)</code>.</p>
<h2 id="end-of-sampling-eos">End of Sampling (EOS)</h2>
<p><em>AI, Generation</em></p>
<p>A marker used to tell the AI to stop generating. Generally, it is an uncommon symbol that would not appear unless the user 'trains' the AI to use it regularly. Useful for generating text similar to chat logs and other unorthodox forms, or simply to stop on sentence ending markers.</p>
<h2 id="end-of-text-token-endoftext">End of Text Token (&lt;|endoftext|&gt;)</h2>
<p><em>AI</em></p>
<p>A token that was used to designate the end of a text file, so that the training routine of the AI can proceed to the next file. It can rarely appear during generation, this is simply an artifact and can be removed.</p>
<h2 id="entry-or-lorebook-entry">Entry (or Lorebook Entry)</h2>
<p><em>Text Injection</em></p>
<p>An entry for an element of your story, as part of its lorebook. It has text data, insertion settings, and keys that will activate it if present.</p>
<h2 id="ephemeral-context">Ephemeral Context</h2>
<p><em>Text Injection, Feature</em></p>
<p>A form of Text Injection that is only active for a number of actions, after which it disappears. Has a very specific syntax that no other feature uses.</p>
<h2 id="euterpe-model">Euterpe (Model)</h2>
<p><em>AI</em></p>
<p>A finetune of the Fairseq GPT-13B model. It is superior in creative performance to Sigurd, but more expensive to train and run. It is used by NovelAI during the Beta stage.</p>
<h2 id="finetune">Finetune</h2>
<p><em>AI</em></p>
<p>If you consider the AI as a bunch of knobs and sliders, this is the act of adjusting them in order to make the AI's output more "fitting" for your purposes. This is done on expensive, powerful machines or servers and not really something you do yourself.</p>
<h2 id="flatten">Flatten</h2>
<p><em>Feature</em></p>
<p>An aggressive form of trimming. Eliminates all branches, which leaves the entire story as one solid block of text.</p>
<h2 id="format-or-lorebook-format">Format (or Lorebook Format)</h2>
<p><em>Writing</em></p>
<p>A way to present the information to the AI. It can range from writing things as you would in a normal essay, to using formats similar to code, to many other different types.</p>
<h2 id="generation-or-ai-generation">Generation (or AI Generation)</h2>
<p><em>Generation</em></p>
<p>After the AI receives the context window's data, it tries to continue the story from there. The text you receive from the AI is the Generation.</p>
<h2 id="generative-pre-trained-transformer-gpt">Generative Pre-trained Transformer (GPT)</h2>
<p><em>AI</em></p>
<p>A neural network that takes the form of a large amount of <a href="https://en.wikipedia.org/wiki/Vector_space">vector-space equations</a>. Every number is a token, which is a text fragment that appeared in the AI's training data. The fragments, and their relationships, are analyzed, and a network of "relationships" between all these fragments are created. The goal is to create a network which can replicate human language in order to convincingly generate human-like text.</p>
<p>As it is pre-trained, it does not learn from its input. Only what it has been trained with. Training is an extremely costly operation that requires rare, expensive, and difficult to set up hardware, making it a costly service. These models also require powerful Graphical Processing Units, especially units equipped with Tensor Cores, which are ideal for vector space math (like raytracing!) These GPUs are expensive and use a lot of power, which also makes <em>running</em> a GPT model expensive.</p>
<h2 id="guidance">Guidance</h2>
<p><em>Image Generation</em></p>
<p>See <a href="Glossary.html#scale">Scale</a>.</p>
<h2 id="image-resolution">Image Resolution</h2>
<p><em>Image Generation</em></p>
<p>The total surface of your image, defined by its Width, multiplied by its Height. NovelAI can generate images up to ~3 Megapixels in resolution (1024x1024).</p>
<h2 id="image-to-image-img2img">Image To Image (Img2Img)</h2>
<p><em>Image Generation</em></p>
<p>Using an image as a base for the AI to modify. The prompt still applies, allowing you to change, add, or remove elements from the original picture.</p>
<h2 id="inline-generation">Inline Generation</h2>
<p><em>Feature, Generation</em></p>
<p>An action performed by pressing Ctrl + Shift + Enter or ⌘ + Shift + Enter, with the text cursor located in the main text box. This will generate a response where the text cursor is, rather than at the end. Content after the text cursor is ignored by the AI.</p>
<h2 id="inpainting">Inpainting</h2>
<p><em>Image Generation</em></p>
<p>Selecting an area of an image and prompting the Image Generation AI to redraw only this area, alternatively, providing an image with a missing chunk on its inside, and telling the Image Generation AI to complete the missing chunk.</p>
<h2 id="lore-generator">Lore Generator</h2>
<p><em>Feature, Generation</em></p>
<p>A feature of the Lorebook that uses the current module (and if desired, the Memory, Author's Note, and other lorebook entries) to generate lore for concepts, objects, people, factions, and much more.</p>
<h2 id="krake-model">Krake (Model)</h2>
<p><em>AI</em></p>
<p>A finetune of EleutherAI's 20B GPT-NeoX model. It offers similar geenral metrics to Euterpe but has a different set of strengths, namely in terms of real world knowledge, and style-matching abilities.</p>
<h2 id="lorebook">Lorebook</h2>
<p><em>Text Injection, User Content</em></p>
<p>A database of entries, triggered by keys. If an entry's key is found, then the text of the entry is injected into the context, based on its settings. Works identically to other text injections, just with more fine control over where it ends up.</p>
<h2 id="lorebook-keys">Lorebook Keys</h2>
<p><em>Text Injection</em></p>
<p>A text "trigger" which activates a Lorebook entry if found in the text. Can be anything, from a name, to a symbol.</p>
<h2 id="loss-or-training-loss">Loss (or Training Loss)</h2>
<p><em>AI</em></p>
<p>Loss is a term used in Machine Learning to determine if the AI's output is close to what was expected. When training Modules, lower loss means that it deviates less from the dataset, whereas high loss usually mean that the data was improperly cleaned, or it could just mean that the data is different from what the AI has learned before.</p>
<h2 id="loss-graph">Loss Graph</h2>
<p><em>AI</em></p>
<p>A graphical representation of the module's loss after every step of the AI's reading and training. A good 'level' for loss is very subjective, generally, you want to avoid the curve following a path that goes too low or too high, as both have their own issues.</p>
<h2 id="memory">Memory</h2>
<p><em>Text Injection</em></p>
<p>A piece of text that is inserted near the top of the story. Traditionally used to keep track of broad context elements and current events to help the AI stay on track. Works the same as Author's Note otherwise.</p>
<h2 id="model">Model</h2>
<p><em>AI</em></p>
<p>A code base which constitutes the structure on which the neural network is built. GPT-NEO and GPT-J are both model codebases. GPT-J <strong>6B</strong>, however, is a <strong>weight</strong>, which is a pre-trained model that possesses 6 <strong>billion</strong> parameters. Parameters are the number of connections between existing tokens.</p>
<p>Image generation uses different models, which are finetunes of Stable Diffusion, produced by Stability.AI.</p>
<h2 id="module-or-ai-module">Module (or AI Module)</h2>
<p><em>AI, User Content</em></p>
<p>Known as a <strong>soft prompt</strong> in the research community. This is a batch of vector math that is sent directly to the AI, ignoring tokenization completely. It takes the same amount of space in the context window as 20 tokens, but is not a token by itself. Think of it as a mini finetune based on a specific group of texts that does not require re-training the AI as a whole, but still changes what the AI will produce.</p>
<h2 id="module-training">Module Training</h2>
<p><em>AI</em></p>
<p>Sending text files to NovelAI's model training program in order to produce a module trained on their content. Works similarly to fine-tuning a model, but on a smaller scale.</p>
<h2 id="nai-diffusion-anime-curated">NAI Diffusion Anime Curated</h2>
<p><em>Image Generation, Model</em></p>
<p>A finetune of Stable Diffusion, trained on Danbooru images, all of which are tagged as Safe, ensuing no NSFW output. Generally outputs more consistent images and is better at pre-existing characters, to some degree.</p>
<h2 id="nai-diffusion-anime-full">NAI Diffusion Anime Full</h2>
<p><em>Image Generation, Model</em></p>
<p>A finetune of Stable Diffusion, trained on Danbooru images, which is capable of NSFW output, as it uses all types of images. Outputs greater variety for characters.</p>
<h2 id="nai-diffusion-furry">NAI Diffusion Furry</h2>
<p><em>Image Generation, Model</em></p>
<p>A finetune of Stable Diffusion, based on images from various sources with E621 tagging. The main focus is on anthropomorphic characters, but the model has a broad coverage.</p>
<h2 id="noise">Noise</h2>
<p><em>Image Generation</em> Noise is the base for all Stable Diffusion images (hence the name of diffusion). The noise pattern is refined into an image after every step.</p>
<p>As a parameter, Noise <em>adds</em> noise to the existing image in order to allow for greater deviation from the base.</p>
<h2 id="nucleus-sampling-top-p">Nucleus Sampling (Top-P)</h2>
<p><em>AI, Sampling</em></p>
<p>Sampling which selects a set of tokens, based on the percentile chance of them appearing. Starting from the most likely, it adds up probabilities until it hits its setting. Sampling then ends.</p>
<h2 id="order-of-insertion">Order of Insertion</h2>
<p><em>Text Injection</em></p>
<p>A setting which determines the order that text injections are performed. Think of it as a stack: The highest number goes first.</p>
<h2 id="output">Output</h2>
<p><em>AI</em></p>
<p>Synonymous with AI Response or Generation. Effectively, what the AI makes based on what you give it.</p>
<h2 id="perspective-or-pov">Perspective (or POV)</h2>
<p><em>Writing</em></p>
<p>Whether or not the narration is done in first (I/me), second (You), or third person(he/she/it).</p>
<h2 id="phrase-bias">Phrase Bias</h2>
<p><em>Feature, Generation</em></p>
<p>A feature which influences the AI to increase or reduce the likelihood of some tokens or phrases appearing. Good for enforcing consistency or reducing things you don't want without outright bans.</p>
<h2 id="placeholder">Placeholder</h2>
<p><em>Feature</em></p>
<p>A text element that must be filled by a scenario's user upon import.</p>
<h2 id="preamble">Preamble</h2>
<p><em>Generation</em></p>
<p>The Preamble is a sequence of tokens inserted in the context window before generation. It tells the AI "this is the start of something new", which can help reducing the feeling of "being in the middle of something" and sticking to your prompt a little more closely. The Preamble used depends on the model.</p>
<h2 id="prefix">Prefix</h2>
<p><em>Text Injection</em></p>
<p>A small piece of text appended to the beginning of a Text Injection when it is placed in the context window. Helps with separating it from other entries if you use brackets or newlines.</p>
<h2 id="preset-or-generation-preset">Preset (or Generation Preset)</h2>
<p><em>AI, User Content</em></p>
<p>A batch of settings, such as sampling and randomness, that can be saved and shared to other users.</p>
<h2 id="prompt">Prompt</h2>
<p><em>Writing</em></p>
<p>The first piece of story text that you provide to the AI, before any generation has been performed.</p>
<p><em>Image Generation</em></p>
<p>The instructions given to the Diffusion model to direct its output.</p>
<h2 id="prose">Prose</h2>
<p><em>Writing</em></p>
<p>Writing like you speak. Prose is the opposite of <strong>Verse</strong> which follows a structure, meter, or both.</p>
<p><em>Image Generation</em></p>
<p>A prompt written in natural language, as opposed to using tags (although both can be mixed.)</p>
<h2 id="quality-tags">Quality Tags</h2>
<p><em>Image Generation</em></p>
<p>Tags that were applied to images used for the training of NovelAI Diffusion's models. They are based on a percentile score, with the top scoring images being ranked as "masterpiece", all the way through "best quality", "high quality", "normal quality", "low quality" and "worst quality". This is used to discern "good" elements from "bad" ones.</p>
<h2 id="randomness-or-temperature">Randomness (or Temperature)</h2>
<p><em>AI</em></p>
<p>A setting that adjusts the likelihood of the tokens available to the AI after sampling, so that rare tokens actually have a chance of appearing.</p>
<h2 id="redo-tree">Redo Tree</h2>
<p><em>Feature</em></p>
<p>When you have performed one or more Retries or edits for a story step, this button with a number next to Redo will list all the Retries and edits you have done, so you can pick the one you prefer.</p>
<h2 id="repetition-penalty">Repetition Penalty</h2>
<p><em>AI</em></p>
<p>A setting that decreases a token's chance of appearing if it has already appeared in the current generation. Helps reduce repetitiveness.</p>
<h2 id="reserved-tokens">Reserved Tokens</h2>
<p><em>Text Injection</em></p>
<p>How many tokens' worth of space are saved for the current Text Injection. Highest priority reserves first.</p>
<h2 id="retry">Retry</h2>
<p><em>Feature</em></p>
<p>Deleting the previous AI generation and asking the AI to send a new one. If you made any edits, this is just like clicking Send.</p>
<h2 id="sampling">Sampling</h2>
<p><em>AI, Sampling</em></p>
<p>Selecting a limited pool of tokens by doing some math on their probabilities. This helps focus the AI and make Randomness more useful by spreading it over less possible tokens.</p>
<p><em>Image Generation</em> The sampler is an "interpreter" of sorts, which handles how the prompt is processed. The default, k_euler_ancestral, offers greater quality at lower steps, and more per-step variability, ensuing a lot of potential without using a lot of steps per image.</p>
<h2 id="scale">Scale</h2>
<p><em>Image Generation</em></p>
<p>A setting used by Stable Diffusion to adjust how the image is generated. Generally, higher scale leads to stronger contrast, and "sharper" images, whereas low scale is "softer" and more "painterly".</p>
<p>It is a floating point number, and can be fine-tuned down to several decimal places.</p>
<h2 id="scenario">Scenario</h2>
<p><em>User Content</em></p>
<p>A story that was exported for sharing. It can have placeholders: elements that must be filled in when imported by the user, such as names and so on. This allows for easier personalization than a normal prompt. It can also contain a lorebook and generation settings.</p>
<h2 id="search-range">Search Range</h2>
<p><em>Feature</em></p>
<p>A <strong>lorebook</strong> setting that decides how deep in the story text it will go looking for keys before it stops. Helpful if you mention a lot of things but only want to focus on very recent elements.</p>
<h2 id="seed">Seed</h2>
<p><em>Image Generation</em></p>
<p>A 32-bit integer which serves to define the base noise pattern, which is then refined into an image. Using the same seed will result in similar images (to some degree). Exactly identical settings and prompt are required for an identical output.</p>
<h2 id="separator-----">Separator (----)</h2>
<p><em>Typography</em></p>
<p>A set of four hyphens. In the Dataset, this is used to separate the individual data entries for things like Attributes-style character data. As such, it should be used instead of Dinkus (***) if you want a module or scenario to output non-prose. Useful for Generators and other similar uses.</p>
<h2 id="sigurd-model">Sigurd (model)</h2>
<p><em>AI</em></p>
<p>A finetuned version of the GPT-J 6B model. It is superior in creative performance to Calliope, but more expensive to train and run. It is used by NovelAI during the Beta stage.</p>
<h2 id="stable-diffusion">Stable Diffusion</h2>
<p><em>Image Generation</em></p>
<p>An image generation AI system by StabilityAI. As a diffusion model, it generates images based on noise patterns, rather than collaging pictures together. It is open source and can be downloaded and run for free with a suitable GPU. NovelAI's implementation uses additional proprietary code extensions and finetunes.</p>
<h2 id="step">Step</h2>
<p><em>Writing</em></p>
<p>Every time a generation is performed, the story advances to its next step. Edits after a generation count as another step as well.</p>
<p><em>Image Generation</em></p>
<p>One of the de-noising, image-drawing phases performed by Stable Diffusion. Steps are not linear: You cannot simply "add" another step, the entire generation has to be planned for the step amount.</p>
<h2 id="storage">Storage</h2>
<p><em>Feature</em></p>
<p>An encrypted database of your stories. Can be local, or on NovelAI's servers.</p>
<h2 id="story">Story</h2>
<p><em>Writing</em></p>
<p>The content in the text box in the middle of your NovelAI window is "the story text." Every other piece of text fed into the AI is Text Injection.</p>
<h2 id="story-tag">Story Tag</h2>
<p><em>Feature</em></p>
<p>A tag applied to a story so you can search for it easier.</p>
<h2 id="stream-responses">Stream Responses</h2>
<p><em>AI, Feature</em></p>
<p>Displays tokens as they are generated rather than dumping the entire response on you all at once, as if you could watch the AI writing it.</p>
<h2 id="subcontext">Subcontext</h2>
<p><em>Text Injection</em></p>
<p>A group of Lorebook Entries that are injected as one block with its own insertion settings.</p>
<h2 id="suffix">Suffix</h2>
<p><em>Text Injection</em></p>
<p>Identical to <em>Prefix</em>, but it is added to the end of the entry.</p>
<h2 id="tags">Tags</h2>
<p><em>Image Generation</em></p>
<p>Refers to Danbooru tags (Curated, Full), or E621 (furry), which are used for training the AI and make generating specific elements easier.</p>
<h2 id="tail-free-sampling-tfs">Tail-Free Sampling (TFS)</h2>
<p><em>AI, Sampling</em></p>
<p>A "Tail" is basically all the tokens that are <strong>really</strong> not appropriate, such as random garbage symbols or extreme outliers. Most sampling methods are very aggressive and only keep the absolute best tokens. Tail-Free attempts to only cut off the tail so that the pool of possible tokens is bigger and creative, without keeping the really bad tokens.</p>
<h2 id="text-adventure-module">Text Adventure Module</h2>
<p><em>AI, Feature</em></p>
<p>A module designed to be played with DO and SAY inputs, similar to old Text Adventure games like Zork. Uses a different interface where inputs and outputs are clearly delineated.</p>
<h2 id="theme">Theme</h2>
<p><em>Feature</em></p>
<p>A JSON file with some CSS thrown in it, which tells NovelAI's page how to look like. Allows for considerable customization of text colors, backgrounds, and many other things.</p>
<h2 id="tier">Tier</h2>
<p><em>Subscription</em></p>
<p>Tablet, Scroll and Opus are the three Tiers that you can pay for. Generally, Opus has access to features early and some extras, while Tablet has a limited context window.</p>
<h2 id="token">Token</h2>
<p><em>AI</em></p>
<p>A fragment of text that is turned into a mathematical vector (basically, a pair of numbers). The Neural Network of the AI is built on the relationships between all these tokens, which attempts to mathematically reproduce Human language.</p>
<h2 id="token-budget">Token Budget</h2>
<p><em>Text Injection</em></p>
<p>How many tokens are allowed to be used at all by the entry. Generally this is always set to the max window size, and priority takes care of the rest.</p>
<h2 id="token-id">Token ID</h2>
<p><em>AI</em></p>
<p>Remember how every token is a vector? Every vector has a number which serves as its identifying number. For example, [198] is the "new lin" character, so banning it prevents the AI from creating any new lines of its own.</p>
<h2 id="tokenization">Tokenization</h2>
<p><em>AI</em></p>
<p>Turning raw text into tokens. The AI is unable to read pure text data, and must turn it into tokens first.</p>
<h2 id="tokensafe">Tokensafe</h2>
<p><em>Writing, Technique</em></p>
<p>A technique to present information to the AI, a "format". It formats lorebook entries by using headers followed by singular adjectives or nominal groups separated by slashes.</p>
<h2 id="top-a">Top-A</h2>
<p><em>Sampling</em></p>
<p>A sampling method which adjusts the number of selected tokens based on the top token's probability. Lower probabilities mean more tokens.</p>
<h2 id="top-k">Top-K</h2>
<p><em>Sampling</em></p>
<p>A basic form of sampling that selects the K-most likely tokens. A top-K of 10 thus selects the top 10 most likely tokens.</p>
<h2 id="top-kek">Top-Kek</h2>
<p><em>Sampling</em></p>
<p>A sampling method developed by Kurumuz. Which is now known as Top-A.</p>
<h2 id="top-p">Top-P</h2>
<p><em>Sampling</em></p>
<p>Synonym of <em>Nucleus Sampling.</em> P stands for Probability.</p>
<h2 id="typical-sampling">Typical Sampling</h2>
<p><em>Sampling</em></p>
<p>An entropy-based approach to sampling, which samples based on deviation from a base line of entropy rather than probabilities.</p>
<h2 id="train-a-model">Train (a Model)</h2>
<p><em>AI</em></p>
<p>A GPT model is "pre-trained" on a large corpus of text files in order to create its token database, and analyze the relationships between the tokens. This takes a <strong>considerable</strong> amount of processing power and time, and is usually performed on very large, powerful servers or cloud servers.</p>
<h2 id="trim">Trim</h2>
<p><em>Text Injection, Feature</em></p>
<p><strong>Disambiguation:</strong></p>
<p>• Trimming Entries: Any Text Injection can be trimmed down to the Newline, Sentence, or Token, if it is unable to fit in the context window in full.</p>
<p>• Trim Trailing Spaces: Removes any space left at the very end of the story text, if it exists. Most tokens begin with a space, so leaving one can cause strange generations since most tokens aren't able to appear.</p>
<p>• Trim AI responses: A deprecated feature that would cut off the AI generation at the latest sentence delimiter. Nowadays, this is "Continue Response to End of Sentence" in the Account Settings.</p>
<h2 id="undesired-content">Undesired Content</h2>
<p><em>Image Generation</em></p>
<p>Also known as a "Negative Prompt", very similar to negative Phrase Bias, but for image generation. It heavily weakens a tag, in order to make it less likely to appear.</p>

<!-- Javascript added by toc-css.lua to make TOC expandable on click -->
<script>

  const b = document.querySelector("body");
  const n = document.querySelector("nav");
  const buttonsize = 15;

  // click on "toc-title" to show TOC to the side
  document.querySelector("#toc-title").addEventListener("click", function(e) {
    if (e.clientX < e.currentTarget.getBoundingClientRect().left + buttonsize) {
      n.classList.toggle("navshown");
    } else {
      b.classList.toggle("paddingleft");
      n.classList.toggle("navside");
      n.classList.remove("navshown");
    };
  });

  // by default show TOC in large window
  window.onload = function() {
    if (window.innerWidth > 1000) {
      b.classList.add("paddingleft");
      n.classList.add("navside");
    };
  };

  // show/hide TOC on resize
  window.onresize = function () {
    // scrolling on mobile devices triggers resize, so we disable it altogether (for now)
    if (typeof window.orientation !== 'undefined') {
      return;
    };

    if (window.innerWidth > 1000) {
      b.classList.add("paddingleft");
      n.classList.add("navside");
    } else {
      b.classList.remove("paddingleft");
      n.classList.remove("navside");
    };
  };

  // show/hide subsections
  const allLis = document.querySelectorAll("nav li");

  for (const li of allLis) {
    li.addEventListener('click', function (e) {
      // show/hide subsection if arrow is clicked
      if (e.clientX < e.currentTarget.getBoundingClientRect().left + buttonsize
        && e.clientY < e.currentTarget.getBoundingClientRect().top + buttonsize) {

        li.classList.toggle('subShow');
        e.preventDefault();
      };

      // hide full nav if clicked outside
      if (e.currentTarget.getBoundingClientRect().left + 3*buttonsize < e.clientX) {
        n.classList.remove("navshown");
      };
    });

    li.classList.add('subShow');
  };

  // hide ToC if no overruling
  document.querySelector("nav ul").classList.add("toc-invisible");

  // show full nav on tab, hide full nav on escape
  document.addEventListener("keydown", function (e) {
    if (e.which === 27) {
      n.classList.remove("navshown");
      e.preventDefault();
    };
    if (e.which === 9) {
      n.classList.add("navshown");
      e.preventDefault();
    };
  });

  // insert key info
  n.insertAdjacentHTML("beforeend", "<span class='toc-invisible'> \
                                     <br/> \
                                     <p>Press <kbd>Tab</kbd> to show extended width TOC.</p> \
                                     <p>Presss <kbd>Esc</kbd> to go back to normal width.</p> \
                                     </span>");

  // hide full nav when clicked outside
  document.addEventListener("click", function(e) {
    if (n.classList.contains("navshown")) {
      if (!n.contains(e.target)) {
        n.classList.remove("navshown");
      };
    };
  });

</script>
</main>

</body>
</html>
